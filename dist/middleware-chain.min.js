!function(n,i){var t,o,r;"function"==typeof define&&define.amd?define(["lodash"],i):"undefined"!=typeof module&&module.exports?module.exports=i(require("lodash")):(o=i((t=this)._),r=t[n],o.noConflict=function(){return t[n]=r,o},t[n]=o)}("Chain",function(t){function n(){this.chain=[],this.errorChain=[]}function o(n){(4===n.length?this.errorChain:this.chain).push(n)}return n.prototype.use=function(){var i=this;return t.each(arguments,function(n){t.isFunction(n)?o.call(i,n):t.isArray(n)&&t.each(n,function(n){o.call(i,n)})}),this},n.prototype.handle=function(o,r){var e=0,h=0,i=this.chain,t=function(n,i){var t;n===this.chain?(t=n[e++])&&t(o,r,a):n===this.errorChain&&(t=n[h++])&&t(i,o,r,a)}.bind(this),a=function(n){n instanceof Error&&(i=this.errorChain),t(i,n)}.bind(this);a()},n});